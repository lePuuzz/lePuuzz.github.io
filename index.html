<!DOCTYPE html>
<html>
<body>

<h2>Farbmischer</h2>

<p>Geben Sie die RGB-Werte ein:</p>

R: <input type="number" id="r" min="0" max="255"><br>
G: <input type="number" id="g" min="0" max="255"><br>
B: <input type="number" id="b" min="0" max="255"><br>

<button onclick="findNearestColor()">Finden Sie die nächstgelegene Farbe</button>

<p id="result"></p>

<script>
var farben = {
    'rot': [255, 0, 0],
    'gelb': [255, 255, 0],
    'schwarz': [0, 0, 0],
    'grün': [0, 128, 0],
    'lila': [128, 0, 128],
    'rosa': [255, 192, 203],
    'orange': [255, 165, 0],
    'blau': [0, 0, 255],
    'türkis': [64,224,208], // Neu hinzugefügt
    'dunkelrot': [139,0,0], // Dunkelrot
    'hellgrün': [144,238,144], // Hellgrün
    'braun': [165,42,42], // Neu hinzugefügt
    'beige': [245,245,220]
};

function findNearestColor() {
    var r = document.getElementById("r").value;
    var g = document.getElementById("g").value;
    var b = document.getElementById("b").value;

    var nearestColor = "";
    var nearestDistance = Infinity;

    // Generieren Sie alle möglichen Kombinationen von 2 bis 4 Farben
    for (var r = 2; r <= 4; r++) {
        var farbkombis = combinations(Object.keys(farben), r);
        for (var i = 0; i < farbkombis.length; i++) {
            var farbkombi = farbkombis[i];
            var mix_color = averageColor(farbkombi);
            var distance = colorDistance([r,g,b], mix_color);
            if (distance < nearestDistance) {
                nearestDistance = distance;
                nearestColor = farbkombi;
            }
        }
    }

    document.getElementById("result").innerHTML = "Die nächstgelegene Farbe ist " + nearestColor.join(", ");
}

function combinations(arr, r) {
    var result = [];
    var f = function(prefix, arr) {
        for (var i = 0; i < arr.length; i++) {
            result.push(prefix.concat(arr[i]));
            if (prefix.length + 1 < r) {
                f(prefix.concat(arr[i]), arr.slice(i + 1));
            }
        }
    }
    f([], arr);
    return result;
}

function averageColor(colors) {
    var sum_color = [0, 0, 0];
    for (var i = 0; i < colors.length; i++) {
        var color = farben[colors[i]];
        sum_color[0] += color[0];
        sum_color[1] += color[1];
        sum_color[2] += color[2];
    }
    return sum_color.map(function(x) { return x / colors.length; });
}

function colorDistance(color1, color2) {
    return Math.sqrt(Math.pow(color1[0] - color2[0], 2) + Math.pow(color1[1] - color2[1], 2) + Math.pow(color1[2] - color2[2], 2));
}
</script>

</body>
</html>
